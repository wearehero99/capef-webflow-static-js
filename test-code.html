<div
  data-current="Tab 2"
  data-easing="ease"
  data-duration-in="300"
  data-duration-out="100"
  class="w-tabs"
>
  <div class="tab-container-center w-tab-menu" role="tablist">
    <a
      id="atendimento-presencial-input"
      data-w-tab="Tab 1"
      class="tab-link-form _02 w-inline-block w-tab-link"
      href="#w-tabs-0-data-w-pane-0"
      role="tab"
      aria-controls="w-tabs-0-data-w-pane-0"
      aria-selected="false"
      tabindex="-1"
    >
      <div class="tab-container">
        <div class="icon-tab-container ico-01">
          <img
            loading="lazy"
            src="https://assets.website-files.com/639787ef2df6f2cf951c2cba/63f6f063c40da5ef7581fd59_ico.svg"
            alt=""
            class="icon-tab"
          />
        </div>
        <div class="text-tab">
          <div class="text-align-center">
            <div>Atendimento Presencial</div>
          </div>
        </div>
      </div> </a
    ><a
      id="atendimento-eletronico-input"
      data-w-tab="Tab 2"
      class="tab-link-form _02 w-inline-block w-tab-link w--current"
      href="#w-tabs-0-data-w-pane-1"
      role="tab"
      aria-controls="w-tabs-0-data-w-pane-1"
      aria-selected="true"
    >
      <div class="tab-container">
        <div class="icon-tab-container ico-02">
          <img
            loading="lazy"
            src="https://assets.website-files.com/639787ef2df6f2cf951c2cba/63f6f063c40da5493481fd58_ico-1.svg"
            alt=""
            class="icon-tab"
          />
        </div>
        <div class="text-tab">
          <div class="text-align-center">
            <div>Atendimento eletrônico</div>
          </div>
        </div>
      </div>
    </a>
  </div>
  <div class="w-tab-content">
    <div
      data-w-tab="Tab 1"
      class="w-tab-pane"
      id="w-tabs-0-data-w-pane-0"
      role="tabpanel"
      aria-labelledby="atendimento-presencial-input"
    >
      <div class="container-form-tab">
        <div>
          <div class="tab-titlle">
            <div class="heading-style-h6">Atendimento Presencial</div>
          </div>
        </div>
        <div class="w-form">
          <div class="padding-small"></div>
          <div class="padding-small"></div>
          <form
            id="email-form02"
            name="email-form"
            data-name="Email Form"
            method="get"
            class="solicitation-form-2"
            aria-label="Email Form"
          >
            <div class="c-input-form">
              <div class="input-grid _3fr">
                <div class="c-input-tab">
                  <label for="dia-input" class="c-text cc-field-header"
                    >Dia</label
                  ><select
                    id="dia-input"
                    name="dia-input"
                    data-name="dia-input"
                    required=""
                    class="c-text-field w-select"
                  >
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    <option value="6">6</option>
                    <option value="7">7</option>
                    <option value="8">8</option>
                    <option value="9">9</option>
                    <option value="10">10</option>
                    <option value="11">11</option>
                    <option value="12">12</option>
                    <option value="13">13</option>
                    <option value="14">14</option>
                    <option value="15">15</option>
                    <option value="16">16</option>
                    <option value="17">17</option>
                    <option value="18">18</option>
                    <option value="19">19</option>
                    <option value="20">20</option>
                    <option value="21">21</option>
                    <option value="22">22</option>
                    <option value="23">23</option>
                    <option value="24">24</option>
                    <option value="25">25</option>
                    <option value="26">26</option>
                    <option value="27">27</option>
                    <option value="28">28</option>
                    <option value="29">29</option>
                    <option value="30">30</option>
                    <option value="31">31</option>
                  </select>
                </div>
                <div class="c-input-tab">
                  <label for="mes-input" class="c-text cc-field-header"
                    >Mês</label
                  ><select
                    id="mes-input"
                    name="mes-input"
                    data-name="mes-input"
                    required=""
                    class="c-text-field w-select"
                  >
                    <option value="1">Janeiro</option>
                    <option value="2">Fevereiro</option>
                    <option value="3">Março</option>
                    <option value="4">Abril</option>
                    <option value="5">Maio</option>
                    <option value="6">Junho</option>
                    <option value="7">Julho</option>
                    <option value="8">Agosto</option>
                    <option value="9">Setembro</option>
                    <option value="10">Outubro</option>
                    <option value="11">Novembro</option>
                    <option value="12">Dezembro</option>
                  </select>
                </div>
                <div class="c-input-tab">
                  <label for="year-input" class="c-text cc-field-header"
                    >Ano</label
                  ><select
                    id="year-input"
                    name="time-input-3"
                    data-name="Time Input 3"
                    required=""
                    class="c-text-field w-select"
                  >
                    <option value="2023">2023</option>
                    <option value="2024">2024</option>
                  </select>
                </div>
                <div class="c-input-tab"></div>
              </div>
            </div>
            <div class="c-input-form">
              <div class="input-grid _2fr">
                <div class="c-input-tab">
                  <label for="plan-input" class="c-text cc-field-header"
                    >Plano</label
                  ><select
                    id="plan-input"
                    name="plano"
                    data-name="plano"
                    required=""
                    class="c-text-field w-select"
                  >
                    <option value="1">Plano BD</option>
                    <option value="2">Plano CV I</option>
                  </select>
                </div>
                <div class="c-input-tab desativar">
                  <label for="field-2" class="c-text cc-field-header"
                    >Data</label
                  >
                  <div class="c-text-field w-embed">
                    <input
                      class="input"
                      type="date"
                      id="date-input"
                      name="appt"
                      onchange="handleDateChange(event);"
                    />

                    <style>
                      .input {
                        padding-top: 0.25rem;
                        width: 100%;
                        border: none;
                        outline: none;
                        background: none;
                      }
                    </style>
                  </div>
                </div>
                <div class="c-input-tab">
                  <label for="time-input-2" class="c-text cc-field-header"
                    >Horário</label
                  ><select
                    id="time-input-2"
                    name="time-input-2"
                    data-name="Time Input 2"
                    required=""
                    class="c-text-field w-select"
                  >
                    <option value="Another option">--:--</option>
                  </select>
                </div>
              </div>
            </div>
            <div class="c-input-form">
              <div class="input-grid">
                <div class="c-input-tab">
                  <label for="email-input" class="c-text cc-field-header"
                    >e-mail</label
                  ><input
                    type="text"
                    class="c-text-field w-input"
                    maxlength="256"
                    name="email"
                    data-name="email"
                    placeholder="Insira seu e-mail"
                    id="email-input"
                    required=""
                  />
                </div>
                <div class="c-input-tab">
                  <label for="phone-01" class="c-text cc-field-header"
                    >DDD + Telefone</label
                  ><input
                    type="text"
                    class="c-text-field w-input"
                    maxlength="256"
                    name="phone"
                    data-name="phone"
                    placeholder="Insira seu telefone "
                    id="phone-01"
                    required=""
                  />
                </div>
              </div>
            </div>
            <div class="c-input-form">
              <div class="input-grid">
                <div class="c-input-tab">
                  <label for="cpf-01" class="c-text cc-field-header">CPF</label
                  ><input
                    type="text"
                    class="c-text-field w-input"
                    maxlength="256"
                    name="phone02"
                    data-name="phone02"
                    placeholder="Insira seu CPF"
                    id="cpf-01"
                    required=""
                  />
                </div>
                <div class="c-input-tab"></div>
                <div
                  id="w-node-ea406dc6-0438-1eb8-0229-f187adca1535-2f5a80dc"
                  class="descripition-input-form"
                >
                  <div>Digite o cpf somente com os números.</div>
                  <ul role="list">
                    <li>
                      Só é possível realizar agendamento se seu cpf estiver
                      cadastrado em nosso banco de dados.
                    </li>
                  </ul>
                </div>
              </div>
            </div>
            <div class="tab-button-box">
              <a
                id="atendimento-presencial-submit"
                href="#"
                class="button-6 button-full w-button"
                >Enviar</a
              >
            </div>
          </form>
          <div
            class="w-form-done"
            tabindex="-1"
            role="region"
            aria-label="Email Form success"
          >
            <div>Thank you! Your submission has been received!</div>
          </div>
          <div
            class="w-form-fail"
            tabindex="-1"
            role="region"
            aria-label="Email Form failure"
            style="display: none"
          ></div>
        </div>
      </div>
    </div>
    <div
      data-w-tab="Tab 2"
      class="w-tab-pane w--tab-active"
      id="w-tabs-0-data-w-pane-1"
      role="tabpanel"
      aria-labelledby="atendimento-eletronico-input"
      style="opacity: 1; transition: opacity 300ms ease 0s"
    >
      <div class="container-form-tab">
        <div>
          <div class="tab-titlle">
            <div class="heading-style-h6">Atendimento Eletrônico</div>
          </div>
        </div>
        <div class="w-form">
          <div class="padding-small"></div>
          <div class="padding-small"></div>
          <form
            id="email-form02"
            name="email-form"
            data-name="Email Form"
            method="get"
            class="solicitation-form-2"
            aria-label="Email Form"
          >
            <div class="c-input-form">
              <div class="input-grid _3fr">
                <div class="c-input-tab">
                  <label for="dia-input-2" class="c-text cc-field-header"
                    >Dia</label
                  ><select
                    id="dia-input-2"
                    name="dia-input-2"
                    data-name="Dia Input 2"
                    required=""
                    class="c-text-field w-select"
                  >
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    <option value="6">6</option>
                    <option value="7">7</option>
                    <option value="8">8</option>
                    <option value="9">9</option>
                    <option value="10">10</option>
                    <option value="11">11</option>
                    <option value="12">12</option>
                    <option value="13">13</option>
                    <option value="14">14</option>
                    <option value="15">15</option>
                    <option value="16">16</option>
                    <option value="17">17</option>
                    <option value="18">18</option>
                    <option value="19">19</option>
                    <option value="20">20</option>
                    <option value="21">21</option>
                    <option value="22">22</option>
                    <option value="23">23</option>
                    <option value="24">24</option>
                    <option value="25">25</option>
                    <option value="26">26</option>
                    <option value="27">27</option>
                    <option value="28">28</option>
                    <option value="29">29</option>
                    <option value="30">30</option>
                    <option value="31">31</option>
                  </select>
                </div>
                <div class="c-input-tab">
                  <label for="mes-input-2" class="c-text cc-field-header"
                    >Mês</label
                  ><select
                    id="mes-input-2"
                    name="mes-input-2"
                    data-name="Mes Input 2"
                    required=""
                    class="c-text-field w-select"
                  >
                    <option value="1">Janeiro</option>
                    <option value="2">Fevereiro</option>
                    <option value="3">Março</option>
                    <option value="4">Abril</option>
                    <option value="5">Maio</option>
                    <option value="6">Junho</option>
                    <option value="7">Julho</option>
                    <option value="8">Agosto</option>
                    <option value="9">Setembro</option>
                    <option value="10">Outubro</option>
                    <option value="11">Novembro</option>
                    <option value="12">Dezembro</option>
                  </select>
                </div>
                <div class="c-input-tab">
                  <label for="year-input-2" class="c-text cc-field-header"
                    >Ano</label
                  ><select
                    id="year-input-2"
                    name="time-input-3"
                    data-name="Time Input 3"
                    required=""
                    class="c-text-field w-select"
                  >
                    <option value="2023">2023</option>
                    <option value="2024">2024</option>
                  </select>
                </div>
                <div class="c-input-tab"></div>
              </div>
            </div>
            <div class="c-input-tab">
              <label for="assunto-input" class="c-text cc-field-header"
                >Assunto</label
              ><select
                id="assunto-input"
                name="Assunto"
                data-name="Assunto"
                required=""
                class="c-text-field w-select"
              >
                <option value="First">Adesão</option>
                <option value="Another option">Benefício</option>
                <option value="Cadastro">Cadastro</option>
                <option value="Contribuição previdenciária ">
                  Contribuição previdenciária
                </option>
                <option value="Cancelamento ">Cancelamento</option>
                <option value="Empréstimo ">Empréstimo</option>
                <option value="Financiamento imobiliário ">
                  Financiamento imobiliário
                </option>
                <option value="Imposto de renda ">Imposto de renda</option>
                <option value="Another option">
                  Institutos previdenciários
                </option>
                <option value="Processos de Adesão do acordo 2003">
                  Processos de Adesão do acordo 2003
                </option>
                <option value="Recadastramento">Recadastramento</option>
                <option value="Outros">Outros</option>
              </select>
            </div>
            <div class="c-input-form">
              <div class="input-grid _2fr">
                <div class="c-input-tab">
                  <label for="plan-input-2" class="c-text cc-field-header"
                    >Plano</label
                  ><select
                    id="plan-input-2"
                    name="plano"
                    data-name="plano"
                    required=""
                    class="c-text-field w-select"
                  ></select>
                </div>
                <div class="c-input-tab">
                  <label for="horario-2" class="c-text cc-field-header"
                    >Horário</label
                  ><select
                    id="horario-2"
                    name="horario"
                    data-name="horario"
                    required=""
                    class="c-text-field w-select"
                  >
                    <option value="Another option">--:--</option>
                  </select>
                </div>
              </div>
            </div>
            <div class="c-input-form">
              <div class="input-grid">
                <div class="c-input-tab">
                  <label for="email-input-2" class="c-text cc-field-header"
                    >e-mail</label
                  ><input
                    type="text"
                    class="c-text-field w-input"
                    maxlength="256"
                    name="email"
                    data-name="email"
                    placeholder="Insira seu e-mail"
                    id="email-input-2"
                    required=""
                  />
                </div>
                <div class="c-input-tab">
                  <label for="phone-02" class="c-text cc-field-header"
                    >DDD + Telefone</label
                  ><input
                    type="text"
                    class="c-text-field w-input"
                    maxlength="256"
                    name="phone-2"
                    data-name="Phone 2"
                    placeholder="Insira seu telefone "
                    id="phone-02"
                    required=""
                  />
                </div>
              </div>
            </div>
            <div class="c-input-form">
              <div class="input-grid">
                <div class="c-input-tab">
                  <label for="cpf-02" class="c-text cc-field-header">CPF</label
                  ><input
                    type="text"
                    class="c-text-field w-input"
                    maxlength="256"
                    name="phone02"
                    data-name="phone02"
                    placeholder="Insira seu CPF"
                    id="cpf-02"
                    required=""
                  />
                </div>
                <div class="c-input-tab"></div>
                <div
                  id="w-node-_05baabee-d14f-0157-dcca-c19118bc6941-2f5a80dc"
                  class="descripition-input-form"
                >
                  <div>Digite o cpf somente com os números.</div>
                  <ul role="list">
                    <li>
                      Só é possível realizar agendamento se seu cpf estiver
                      cadastrado em nosso banco de dados.
                    </li>
                  </ul>
                </div>
              </div>
            </div>
            <div class="tab-button-box">
              <a
                id="atendimento-eletronico-submit"
                href="#electronico"
                class="button-6 button-full w-button"
                >Enviar</a
              >
            </div>
          </form>
          <div
            class="w-form-done"
            tabindex="-1"
            role="region"
            aria-label="Email Form success"
          >
            <div>Thank you! Your submission has been received!</div>
          </div>
          <div
            class="w-form-fail"
            tabindex="-1"
            role="region"
            aria-label="Email Form failure"
          >
            <div>Oops! Something went wrong while submitting the form.</div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script
  src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.4/jquery.min.js"
  integrity="sha512-pumBsjNRGGqkPzKHndZMaAG+bir374sORyzM3uulLV14lN5LyykqNk8eEeUlUkB3U0M4FApyaHraT65ihJhDpQ=="
  crossorigin="anonymous"
  referrerpolicy="no-referrer"
></script>

<script src="https://cdn.rawgit.com/wearehero99/capef-webflow-static-js/main/jquery-mask.js"></script>

<script>
  let tipoAtendimento = 1;

  async function setupToken() {
    let token = localStorage.getItem('authToken');

    if (!token) {
      const authResponse = await fetch(
        'https://apifalecimento.capef.com.br/auth/access-token',
        {
          method: 'POST',
          body: JSON.stringify({
            username: 'Hero99',
            password: 'd7OwsEqTXc'
          }),
          headers: {
            'Content-Type': 'application/json'
          }
        }
      );

      if (!authResponse.ok) {
        throw new Error('Failed to obtain authentication token');
      }

      const authData = await authResponse.json();
      token = authData.access_Token;

      localStorage.setItem('authToken', token);
    }
  }

  async function authFetch(url, options = {}) {
    try {
      let token = localStorage.getItem('authToken');

      const headers = {
        ...options.headers,
        Authorization: `Bearer ${token}`
      };

      const dataResponse = await fetch(url, {
        ...options,
        headers
      });

      if (dataResponse.status === 401) {
        localStorage.removeItem('authToken');
        await setupToken();
        getTimesOfToday();
      }

      if (dataResponse.status === 204) {
        return {
          status: dataResponse.status
        };
      }

      if (!dataResponse.ok) {
        if (await dataResponse.json()) {
          const result = await dataResponse.json();

          return {
            error: result[0],
            status: dataResponse.status
          };
        } else {
          return {
            status: dataResponse.status
          };
        }
      }

      const data = await dataResponse.json();
      return data;
    } catch (error) {
      return error;
    }
  }

  function clearError() {
    $('.w-form-fail').css('display', 'none');
    $('.w-form-fail').text('');
  }

  const api = authFetch;

  var urlSchedule = 'https://apiagendamento.capef.com.br';
  var urlCalend = 'https://apiagendamento.capef.com.br';

  function showFormFailMessage(message) {
    $('.w-form-fail').css('display', 'block');
    $('.w-form-fail').text(message);
  }

  $(document).ready(function ($) {
    $('#phone-01').mask('(99) 9 9999-9999');
    $('#phone-02').mask('(99) 9 9999-9999');
    $('#cpf-01').mask('999.999.999-99');
    $('#cpf-02').mask('999.999.999-99');
  });

  function getElement(selector) {
    return document.querySelector(selector);
  }

  async function getTimes({ day, year, month, atendimentoType }) {
    const attId = atendimentoType;

    console.log('atendimentoType', atendimentoType);

    try {
      const response = await api(
        `${urlCalend}/horarios/atendimento/${attId}/dia/${day}/mes/${month}/ano/${year}`
      );
      const data = response;

      if (data.status === 204) {
        //Sem horarios
        showFormFailMessage('Sem horarios disponível para está data');

        return;
      } else {
        if (data.error) {
          //Chamar o erro aqui e mostra a mensagem de erro.
          console.log('error ===> ', data.error);
          return;
        }
        clearError();

        if (data.length) {
          const horariosWithoutKeys = data.map(item => item.horarios);

          const timeInput = $('#time-input-2');

          $.each(horariosWithoutKeys, function (index, value) {
            timeInput.append(
              "<option value='" + value + "'>" + value + '</option>'
            );
          });

          timeInput.val(horariosWithoutKeys[0]);
        }
      }
    } catch (error) {
      console.log(error);
    }
  }

  async function checkCPF(cpf) {
    const response = await api(`${urlSchedule}/agendamento/validar/cpf/${cpf}`);
    const data = (await response).json();
    console.log('checkCPF Data ====> ', data);
  }

  async function getTimesOfToday() {
    const currentDate = new Date();

    // Get the current day, month, and year
    const currentDay = currentDate.getDate();
    const currentMonth = currentDate.getMonth() + 1; // January is 0
    const currentYear = currentDate.getFullYear();

    // Set the default values for the input fields
    $('#dia-input, #dia-input-2 ').val(currentDay);
    $('#mes-input, #mes-input-2').val(currentMonth);
    $('#year-input, #year-input-2').val(currentYear);

    getTimes({
      day: currentDay,
      year: currentYear,
      month: currentMonth,
      atendimentoType: tipoAtendimento || 2
    });
  }

  async function isAttendAlreadyExist({ typeAtt, cpf }) {
    const response = await api(
      `${urlSchedule}/agendamento/existe/atendimento/${typeAtt}/cpf/${cpf}`
    );
    const result = response;

    if (result.status === 204) {
      clearError();
      //show the error msg
      showFormFailMessage(
        'Não existe agendamento gravados que atendem aos parâmetros passados.'
      );
      return false;
    } else {
      const data = (await response).json();
      return true;
    }
  }

  async function scheduleAttend(data) {
    clearError();
    $('#atendimento-presencial-submit, #atendimento-eletronico-submit').prop(
      'disabled',
      true
    );
    $('#atendimento-presencial-submit, #atendimento-eletronico-submit').text(
      'carregando...'
    );

    const response = await api(`${urlSchedule}/agendamento/criar`, {
      method: 'POST',
      body: JSON.stringify(data)
    });

    $('#atendimento-presencial-submit, #atendimento-eletronico-submit').prop(
      'disabled',
      false
    );

    if (response.status === 200) {
      $('#email-form02').css('display', 'none');
      $('.w-form-done').css('display', 'block');
    }
  }

  function getElement(selector) {
    return document.querySelector(selector);
  }

  async function loadScript() {
    await setupToken();

    getTimesOfToday();

    $(
      '#dia-input, #mes-input, #year-input, #plan-input, #dia-input-2, #mes-input-2, #year-input-2, #plan-input-2'
    ).change(function () {
      clearError();
      // Get the new input values

      const day = $(
        tipoAtendimento === 0 ? '#dia-input' : '#dia-input-2'
      ).val();
      const month = $(
        tipoAtendimento === 0 ? '#mes-input' : '#mes-input-2'
      ).val();
      const year = $(
        tipoAtendimento === 0 ? '#year-input' : '#year-input-2'
      ).val();
      const planInputValue = getElement(
        tipoAtendimento === 0 ? '#plan-input' : '#plan-input-2'
      ).value;

      getTimes({
        day,
        year,
        month,
        atendimentoType: planInputValue
      });
    });

    $('#atendimento-eletronico-input, #atendimento-eletronico-submit').click(
      async function () {
        clearError();
        await getPlans();
        tipoAtendimento = 2;
      }
    );

    $('#atendimento-presencial-input, #atendimento-eletronico-submit').click(
      async function () {
        clearError();
        await getPlans();
        tipoAtendimento = 1;
      }
    );

    async function getPlans() {
      const response = await api(`${urlSchedule}/plano`);
      const result = response;

      const planInput = $('#plan-input');
      const planInput2 = $('#plan-input-2');

      $.each(result, function (index, value) {
        planInput.append(
          "<option value='" + value.id + "'>" + value.descricao + '</option>'
        );
        planInput2.append(
          "<option value='" + value.id + "'>" + value.descricao + '</option>'
        );
      });

      planInput.val(result[0].id);
      planInput2.val(result[0].id);
    }

    getPlans();

    $(
      '#dia-input, #mes-input, #year-input, #plan-input,#mes-input-2, #year-input-2, #plan-input-2, #phone-01,#phone-02, #time-input-2, #email-input,#email-input-2, #assunto-input'
    ).change(function () {
      clearError();
    });
  }

  loadScript();

  async function createRegistration() {
    clearError();
    const phoneValue = getElement(
      tipoAtendimento === 0 ? '#phone-01' : '#phone-02'
    ).value;
    const cpfInputValue = getElement(
      tipoAtendimento === 0 ? '#cpf-01' : '#cpf-02'
    ).value;
    const timeInputValue = getElement(
      tipoAtendimento === 0 ? '#time-input-2' : '#horario-2'
    ).value;
    const planInputValue = getElement(
      tipoAtendimento === 0 ? '#plan-input' : '#plan-input-2'
    ).value;
    const emailInputValue = getElement(
      tipoAtendimento === 0 ? '#email-input' : '#email-input-2'
    ).value;
    const assuntoInputValue = getElement('#assunto-input')
      ? getElement('#assunto-input').value
      : '';
    const day = getElement(
      tipoAtendimento === 0 ? '#dia-input' : '#dia-input-2'
    ).value;
    const month = getElement(
      tipoAtendimento === 0 ? '#mes-input' : '#mes-input-2'
    ).value;
    const year = getElement(
      tipoAtendimento === 0 ? '#year-input' : '#year-input-2'
    ).value;
    const phoneDDD = phoneValue
      .replace('(', '')
      .replace(')', '')
      .substring(0, 3);
    const phoneRest = phoneValue.replace('(', '').replace(')', '').substring(3);

    // Verify the values
    if (
      cpfInputValue &&
      timeInputValue &&
      planInputValue &&
      emailInputValue &&
      phoneValue
    ) {
      // Split the phone value

      const resultCPF = await isAttendAlreadyExist({
        cpf: cpfInputValue,
        typeAtt: tipoAtendimento
      });

      if (resultCPF) {
        const raw = {
          ano: year,
          dia: day,
          mes: month,
          plano: planInputValue,
          assunto: tipoAtendimento === 1 ? assuntoInputValue : 'Outros',
          horario: timeInputValue,
          cpf: cpfInputValue,
          ddd: phoneDDD.replace(' ', ''),
          telefone: phoneRest.replace(' ', '').replace('-', ''),
          email: emailInputValue,
          tipoAtendimento: tipoAtendimento
        };

        const response = await scheduleAttend(raw);
        console.log('response schedule ===> ', response);
      }

      return;
    } else {
      showFormFailMessage('Todos os campos são obrigatorios');
      console.log('One or more input values are missing.');
      return;
    }
  }

  document
    .querySelector('#atendimento-presencial-submit')
    .addEventListener('click', createRegistration);

  document
    .querySelector('#atendimento-eletronico-submit')
    .addEventListener('click', createRegistration);
</script>
